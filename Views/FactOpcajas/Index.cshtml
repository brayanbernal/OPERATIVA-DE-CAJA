
@model IEnumerable<OperativaCaja.Models.FactOpcaja>
@{
	ViewBag.Title = "Facturas";
	Layout = "~/Views/Shared/_Layout2.cshtml";
}

<link href="~/Content/stylegeneral.css" rel="stylesheet" />
<link href="~/Content/bootstrap.css" rel="stylesheet" />
<meta http-equiv="Content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.css" />
<script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.18/datatables.min.js"></script>
<script src="~/Scripts/datatable.js"></script>
<link href="~/Content/font-awesome.min.css" rel="stylesheet" />
<script src="~/Scripts/1.10_two_button.js"></script>
@ViewBag.alert
<script type="text/javascript" class="init">
    $(document).ready(function () {
        $('#example').DataTable({
            "pagingType": 'full_numbers',
            "language": {
                "url": "//cdn.datatables.net/plug-ins/1.10.15/i18n/Spanish.json"
            }
        });
    });
</script>

<div class="col-md-13" style="background: rgb(248, 248, 248)">
	<div class="form-group">
		<div class="col-md-10"><h3 style="border-bottom: 5px solid #2B7785 !important; width: 123%; color: #2B7785 !important; padding: 9px 20px 15px 0px !important;margin-bottom: 31px !important;">Lista de Facturas</h3></div>
		<div class="col-md-2" style=" margin-top:35px;">
			<a href="/FactOpcajas/CuentaOperacion" class="AddUser btn btn-success btn-small btnnuevo">Nueva Factura</a>
		</div>
	</div>

	<div class="col-md-12 contenido">
		<div class="form-group">
			<button class="js-refrescar"><i class="fa fa-refresh" aria-hidden="true"></i> Actualizar</button>
		</div>
	</div>

	<div class="modal fade" data-backdrop="static" id="centro" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
		<div class="modal-dialog" role="document">
			<div class="modal-content">

				<div class="modal-body">
				</div>
			</div>
		</div>
	</div>

	<div class="table-responsive col-md-12">
		<div class="col-md-12">
			<table id="example" class="table table-striped table-bordered dataTable no-border" widcellspacing="0">
				<thead>
					<tr>
						<th class="medium columnatablaazul">
							<label>Fecha</label>
						</th>
						<th class="medium columnatablaazul">
							<label>N° Factura</label>
						</th>
						<th class="medium columnatablaazul">
							<label>Operación</label>
						</th>
						<th class="medium columnatablaazul2">
							<label>Caja</label>
						</th>
						<th class="medium columnatablaazul2">
							<label>Código de Cajero</label>
						</th>
						<th class="medium columnatablaazul">
							<label>Código Caja</label>
						</th>

						
						<th class="medium columnatablaazul">
							<label>Valor Efectivo</label>
						</th>
						<th class="medium columnatablaazul">
							<label>Cheques</label>
						</th>
						<th class="medium columnatablaazul">
							<label>Total en Cheques</label>
						</th>

						<th class="medium columnatablaazul2">
							<label>Observación</label>
						</th>


						<th class="medium columnatablaazul2">
							<label>Cuenta</label>
						</th>
						<th class="medium columnatablaazul2">
							<label>Nit Asociado</label>
						</th>
						<th class="medium columnatablaazul2">
							<label>Nombre Asociado</label>
						</th>
						<th class="medium columnatablaazul2">
							<label>Valor Total</label>
						</th>
						<th class="medium columnatablaazul2">
							<label>Saldo en Cuenta</label>
						</th>

						<th class="medium columnatablaazul2">&nbsp;Opciones&nbsp;</th>
					</tr>
				</thead>
				<tbody>
					@foreach (var item in Model)
					{
					<tr class="align-center medium">
						<td>
							@Html.DisplayFor(modelItem => item.fecha)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.factura)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.operacion)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.Caja.Nombre_caja)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.nit_cajero)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.configCajero.Codigo_caja)
						</td>

						<td>
							@Html.DisplayFor(modelItem => item.valor_efectivo)
						</td>
						<td>
							<table border="1">
								<tr>
									<td><b>Cod Banco</b></td>
									<td><b>N° Cheque</b></td>
									<td><b></b>Valor Discriminado</td>
									
								</tr>
								@if (item.valor_cheque != 0 &&item.valor_cheque !=null)
								{
									<tr>
										<td>@Html.DisplayFor(modelItem => item.nit_consignacion)</td>
										<td>@Html.DisplayFor(modelItem => item.numero_cheque)	</td>
										<td>@Html.DisplayFor(modelItem => item.valor_cheque)	</td>
									</tr>
								}
								@if (item.valor_cheque1 != 0 && item.valor_cheque != null)
								{
									<tr>
										<td>@Html.DisplayFor(modelItem => item.nit_consignacion1)</td>
										<td>@Html.DisplayFor(modelItem => item.numero_cheque1)	 </td>
										<td>@Html.DisplayFor(modelItem => item.valor_cheque1)	 </td>

									</tr>
								}
								@if (item.valor_cheque2 != 0 && item.valor_cheque != null)
								{
									<tr>
										<td>@Html.DisplayFor(modelItem => item.nit_consignacion2)</td>
										<td>@Html.DisplayFor(modelItem => item.numero_cheque2)	 </td>
										<td>@Html.DisplayFor(modelItem => item.valor_cheque2)	 </td>

									</tr>
								}
								@if (item.valor_cheque3 != 0 && item.valor_cheque != null)
								{
									<td>@Html.DisplayFor(modelItem => item.nit_consignacion3)</td>
									<td>@Html.DisplayFor(modelItem => item.numero_cheque3)	 </td>
									<td>@Html.DisplayFor(modelItem => item.valor_cheque3)	 </td>

								}
								@if (item.valor_cheque4 != 0 && item.valor_cheque != null)
								{
									<tr>
										<td>@Html.DisplayFor(modelItem => item.nit_consignacion4)</td>
										<td>@Html.DisplayFor(modelItem => item.numero_cheque4)	 </td>
										<td>@Html.DisplayFor(modelItem => item.valor_cheque4)	 </td>
									</tr>
								}
								@if (item.valor_cheque5 !=0 && item.valor_cheque != null)
								{
									<tr>
										<td>@Html.DisplayFor(modelItem => item.nit_consignacion5)</td>
										<td>@Html.DisplayFor(modelItem => item.numero_cheque5)	 </td>
										<td>@Html.DisplayFor(modelItem => item.valor_cheque5)	 </td>
									</tr>
								}
							</table>							
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.total_cheques)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.observacion)
						</td>

						<td>
							@Html.DisplayFor(modelItem => item.numero_cuenta)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.nit_propietario_cuenta)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.nombre_propietario_cuenta)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.total)
						</td>
						<td>
							@Html.DisplayFor(modelItem => item.saldo_total_cuenta)
						</td>

						<td class="align-center">

							<a class="btn btn-inline btn-xs btn-success" href="/FactOpcajas/Details?id=@item.id" data-toggle="modal" data-target="#centro" title="Detalles">
								<i class="fa fa-eye" aria-hidden="true"></i>
							</a>
							@*	<a id="editar" class="btn btn-inline btn-xs btn-primary" href="/FactOpcajas/Edit?id=@item.id" title="Editar">
			<i class="fa fa-pencil" aria-hidden="true"></i>
		</a>
		<a class="btn btn-inline btn-xs btn-danger" href="/FactOpcajas/Delete?id=@item.id" data-toggle="modal" data-target="#centro" title="Eliminar" value="Eliminar">
			<i class="fa fa-trash" aria-hidden="true"></i>
		</a>*@
						</td>
					</tr>
					}
				</tbody>
			</table>
			<br /> <br />
		</div>
	</div>
</div>
<style>
	body {
		background-color: #DDD;
	}
</style>
<script>

    //refrescar un div
    $(".js-refrescar").click(function () {
        $("#mostrar").html("");
        $("#mostrar").load("/FactOpcajas/Index");
    });


    //Al Ocultar el modal
    $(document.body).on('hidden.bs.modal', function () {
        $('#centro').removeData('bs.modal');
        $(".js-refrescar").click();
    });
</script>
